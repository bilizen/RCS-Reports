<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>RCS Reports</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=0"/>
	
	<link href="../css/bootstrap.min.css" rel="stylesheet">
	<link href="../css/style.css" rel="stylesheet">
        <link rel="shortcut icon" href="">

  <!-- Fav and touch icons -->
	<script type="text/javascript" src="../js/jquery.min.js"></script>
	<script type="text/javascript" src="../js/bootstrap.min.js"></script>
  <script type="text/javascript" src="../js/scripts.js"></script>
  <script type="text/javascript" src="../js/scripts2.js"></script>
  <script type="text/javascript" src="../js/database.js" ></script>

   <!-- TAG LENGUAGES -->
    <script type="text/javascript" src="../js/constant-es.js"></script>

  <script  type="text/javascript">

        $(window).load(function(){
          onInit();
          deteclenguage();
        });    

        $(document).ready(function(){

         $("#btnlogin").click(function(){
            
            
            /******Borramos la informacion de la tabla Store porque es un nuevo servidor******/
            
            var queryDelete= "DELETE FROM " +TABLE_STORE;
            try {
                localDB.transaction(function(transaction){
                    transaction.executeSql(queryDelete, [], function(transaction, results){
                        if (!results.rowsAffected) {
                            console.log("Error updateState");
                        }
                        else {
                            console.log("Update realizado:" + results.rowsAffected);
                        }
                    }, errorHandler);
                });
            }catch (e) {
                console.log("Error updateState " + e + ".");
            } 
            
            
            
            
            var pin = $("#pin").val();
            var check = "";

            if($('#chkremember').is(':checked')){
              check = "1";
            }else{
              check = "0";
            }
         
            if(pin.length>0){
              if(checkNetConnection()==true){
                validData(pin, check);
              }else{
                if(current_lang=='es')
                  mostrarModalGeneral("Error de Conexión");
                else
                  mostrarModalGeneral("Connection Fail"); 
              }
              
            }else{
              if(current_lang=='es')
                mostrarModalGeneral("PIN Inválido");
              else
                mostrarModalGeneral("Invalid PIN"); 
            }

         });

        });

  </script>

</head>

<body>
  <div id="ios8_container" class="ios8_bg">
    <header>
        <div id="top_bar_space"></div>
        <div class="options_bar_space">
            <div id="btn_left" class="arrow"><button onclick="goIndex();" id="txtback_login">Back</button></div>
          
          <div id="btn_right"><button></button></div>
        </div>      
    </header>

  	<div id="content">
      <div class="logo-name"><img src="../img/iconLogo.svg"/></div>
      <p class="welcome">&nbsp;</p>
  		<form action="javascript:void(0);">
        <div class="form-group text-center">
  		<label id="lbllmsg1">Enter your Employee Pin Number</label>
        </div>
        <div class="form-group">
          <div class="input_effect">          
              <input type="password" id="pin" name="pin">
              <label id="lbllmsg2">Pin:</label>              
            </div>                   
  			</div>
        <div class="form-group">
          <div class="checkbox_wrapper">    
            <input type="checkbox" name="chkremember" id="chkremember" checked="checked">      
            <label class="text-checkbox" id="checktext">Remenber Pin</label>           
          </div>                     
  			</div>
        <div class="form-group ">
            <input type="button" name="btnlogin" id="btnlogin" value="Go" class="btn btn_only1"/>	
        </div>
  		</form>
  	</div>
  </div>

  <div class="modal fade" id="show_loading" >
      <div class="modal-dialog">
          <div class="text-center loading">
              <div></div>
              <div></div>
          </div>
          <!-- <div class="text-center"><p name="txtloading" id="txtloading"></p></div> -->
          <input type="hidden" id="txtocultaloading" name="txtocultaloading" data-dismiss="modal" aria-hidden="true" />
      </div>
  </div>

  <div class="modal fade" id="modalgeneral">
      <div class="modal-dialog">
          <div class="modal-content">                              
              <div class="modal-body text-center">     
                  <p class="title-alert">Message</p>                 
                  <p id="textgeneral" class="text-center"></p>              
              </div>
              <div class="modal-footer info">
                  <button type="button" class="btn btn-modal" id="btngeneral" name="btngeneral"  data-dismiss="modal" aria-hidden="true"></button>
              </div>
          </div>
      </div>
  </div>

</body>
</html>
